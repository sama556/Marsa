<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8" />
  <title>Marsa – Operator / Bookings</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />
 
  <link rel="stylesheet" href="../admin/css/admin.css" />
</head>
<body>
  <nav class="navbar navbar-expand-lg admin-topbar shadow-sm">
    <div class="container-fluid px-3 px-lg-4">
      <a class="navbar-brand d-flex align-items-center gap-2" href="../visitor/index.html">
        <img src="img/logo-white (1).png" alt="Marsa operator logo"
             class="rounded-1" style="height: 80px; width: auto;">
        <span class="badge bg-light text-dark ms-1">Operator</span>
      </a>
      <div class="ms-auto d-flex align-items-center gap-2">
        <span class="text-white-50 small d-none d-md-inline">Signed in as <strong>farasan_guide@marsa.sa</strong></span>
        <a href="../login.html" class="btn btn-sm btn-outline-light rounded-pill">
          <i class="fa-solid fa-right-from-bracket me-1"></i> Logout
        </a>
      </div>
    </div>
  </nav>

  <main class="admin-layout">
    <div class="container-fluid">
      <div class="row g-3 g-lg-4">
        <aside class="col-lg-3">
          <div class="card admin-card admin-sidebar-card">
            <div class="card-body p-3 p-lg-4">
              <h6 class="text-uppercase text-muted small mb-3">Operator navigation</h6>
              <nav class="nav flex-column small admin-sidebar-nav">
                <a class="nav-link py-2 px-0" href="operator.html">
                  <i class="fa-solid fa-gauge-high me-2"></i> Dashboard
                </a>
                
                <a class="nav-link py-2 px-0" href="operator-activities.html">
                  <i class="fa-solid fa-person-swimming me-2"></i> My activities
                </a>
                <a class="nav-link py-2 px-0 active" href="operator-bookings.html">
                  <i class="fa-solid fa-clipboard-list me-2"></i> Bookings
                </a>
              
              </nav>
            </div>
          </div>
        </aside>

        <div class="col-lg-9">
          <div class="row g-3 mb-4">
            <div class="col-12">
              <h2 class="h4 mb-1">Bookings for my activities</h2>
              
            </div>
          </div>

          <section class="mb-4">
            <div class="card admin-card">
              <div class="card-header bg-white d-flex justify-content-between align-items-center">
                <div>
                  <h3 class="admin-section-title mb-0">
                    <i class="fa-solid fa-clipboard-list"></i> Bookings
                  </h3>
                 
                </div>
              </div>
              <div class="card-body p-3 p-lg-4">
                <form class="row g-2 align-items-end mb-3 small">
                  <div class="col-sm-4 col-md-3">
                    <label for="filterBookingStatus" class="form-label mb-1">Filter by status</label>
                    <select id="filterBookingStatus" class="form-select form-select-sm">
                      <option value="">All statuses</option>
                      <option value="confirmed">Confirmed</option>
                      <option value="pending">Pending</option>
                      <option value="cancelled">Cancelled</option>
                    </select>
                  </div>
                  <div class="col-sm-3 col-md-2">
                    <button type="button" id="btnClearBookingFilters" class="btn btn-outline-secondary btn-sm w-100">
                      Clear
                    </button>
                  </div>
                </form>
                <div class="table-responsive">
                  <table id="operatorBookingsTable" class="table table-sm table-hover align-middle mb-0 small text-center">
                    <thead>
                      <tr>
                        <th>Booking ID</th>
                        <th>User</th>
                        <th>Activity</th>
                        <th>Trip date</th>
                        <th>People</th>
                        <th>Total price</th>
                        <th>Status</th>
                        <th>Created at</th>
                        <th class="text-end">Actions</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr data-status="confirmed">
                        <td>301</td>
                        <td>reem.traveler (#3)</td>
                        <td>Snorkeling reef tour (#201)</td>
                        <td>2026-03-01</td>
                        <td>2</td>
                        <td>700</td>
                        <td><span class="status-pill bg-success-subtle text-success">confirmed</span></td>
                        <td>2026-02-20 09:15</td>
                        <td class="text-end">
                          <button type="button" class="btn btn-outline-secondary btn-sm" data-bs-toggle="modal"
                            data-bs-target="#modalBookingView">
                            <i class="fa-regular fa-eye me-1"></i> View
                          </button>
                        </td>
                      </tr>
                      <tr data-status="pending">
                        <td>302</td>
                        <td>reem.traveler (#3)</td>
                        <td>Sunset boat cruise (#202)</td>
                        <td>2026-03-05</td>
                        <td>4</td>
                        <td>1680</td>
                        <td><span class="status-pill bg-warning-subtle text-warning">pending</span></td>
                        <td>2026-02-21 11:30</td>
                        <td class="text-end">
                          <button type="button" class="btn btn-outline-secondary btn-sm" data-bs-toggle="modal"
                            data-bs-target="#modalBookingView">
                            <i class="fa-regular fa-eye me-1"></i> View
                          </button>
                        </td>
                      </tr>
                      <tr data-status="cancelled">
                        <td>303</td>
                        <td>reem.traveler (#3)</td>
                        <td>Full-day diving trip (#203)</td>
                        <td>2026-02-10</td>
                        <td>2</td>
                        <td>1900</td>
                        <td><span class="status-pill bg-secondary-subtle text-secondary">cancelled</span></td>
                        <td>2026-02-08 15:45</td>
                        <td class="text-end">
                          <button type="button" class="btn btn-outline-secondary btn-sm" data-bs-toggle="modal"
                            data-bs-target="#modalBookingView">
                            <i class="fa-regular fa-eye me-1"></i> View
                          </button>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </section>
        </div>
      </div>
    </div>
  </main>

  <!-- View booking details modal (static) -->
  <div class="modal fade" id="modalBookingView" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">
            <i class="fa-regular fa-eye me-2 text-secondary"></i>
            Booking details – #301
          </h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body bg-light-subtle">
          <div class="mb-3 d-flex flex-wrap gap-2 justify-content-between align-items-center small">
            <span class="badge rounded-pill bg-success-subtle text-success d-flex align-items-center gap-1">
              <i class="fa-solid fa-circle-check"></i>
              confirmed
            </span>
            <span class="badge rounded-pill bg-light text-body d-flex align-items-center gap-1">
              <i class="fa-regular fa-calendar-day"></i>
              Trip date: 2026-03-01
            </span>
            <span class="badge rounded-pill bg-light text-body d-flex align-items-center gap-1">
              <i class="fa-solid fa-user-group"></i>
              2 guests · 700 SAR
            </span>
          </div>
          <div class="row g-3">
            <div class="col-md-4">
              <div class="border rounded-3 bg-white h-100 p-3">
                <h6 class="mb-2 d-flex align-items-center gap-1">
                  <i class="fa-solid fa-ticket-simple text-secondary"></i>
                  <span>Booking overview</span>
                </h6>
                <dl class="row small mb-0">
                  <dt class="col-5 text-muted">Booking ID</dt><dd class="col-7">301</dd>
                  <dt class="col-5 text-muted">Status</dt>
                  <dd class="col-7">
                    <span class="badge bg-success-subtle text-success border">confirmed</span>
                  </dd>
                  <dt class="col-5 text-muted">Created at</dt><dd class="col-7">2026-02-20 09:15</dd>
                  <dt class="col-5 text-muted">Trip date</dt><dd class="col-7">2026-03-01</dd>
                  <dt class="col-5 text-muted">People</dt><dd class="col-7">2</dd>
                  <dt class="col-5 text-muted">Total price</dt><dd class="col-7">700 SAR</dd>
                </dl>
              </div>
            </div>
            <div class="col-md-4">
              <div class="border rounded-3 bg-white h-100 p-3">
                <h6 class="mb-2 d-flex align-items-center gap-1">
                  <i class="fa-regular fa-user text-secondary"></i>
                  <span>Guest &amp; activity</span>
                </h6>
                <dl class="row small mb-0">
                  <dt class="col-5 text-muted">Guest</dt><dd class="col-7">Reem Traveler</dd>
                  <dt class="col-5 text-muted">Username</dt><dd class="col-7">reem.traveler (#3)</dd>
                  <dt class="col-5 text-muted">Email</dt><dd class="col-7">reem.traveler@example.com</dd>
                  <dt class="col-5 text-muted">Activity</dt><dd class="col-7">Snorkeling reef tour (#201)</dd>
                  <dt class="col-5 text-muted">Island</dt><dd class="col-7">Farasan Islands</dd>
                  <dt class="col-5 text-muted">Operator</dt><dd class="col-7">farasan_guide</dd>
                </dl>
              </div>
            </div>
            <div class="col-md-4">
              <div class="border rounded-3 bg-white h-100 p-3 d-flex flex-column">
                <h6 class="mb-2 d-flex align-items-center gap-1">
                  <i class="fa-solid fa-credit-card text-secondary"></i>
                  <span>Payment details</span>
                </h6>
                <dl class="row small mb-2">
                  <dt class="col-6 text-muted">Base price</dt><dd class="col-6 text-end">350 SAR</dd>
                  <dt class="col-6 text-muted">People</dt><dd class="col-6 text-end">2</dd>
                  <dt class="col-6 text-muted">Subtotal</dt><dd class="col-6 text-end">700 SAR</dd>
                  
                  <dt class="col-6 text-muted">Total incl. VAT</dt><dd class="col-6 text-end fw-semibold">805 SAR</dd>
                  <dt class="col-6 text-muted">Method</dt><dd class="col-6 text-end">Credit card </dd>
                </dl>
                
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const table = document.getElementById('operatorBookingsTable');
      const statusSelect = document.getElementById('filterBookingStatus');
      const clearBtn = document.getElementById('btnClearBookingFilters');

      function applyStatusFilter() {
        if (!table || !statusSelect) return;
        const value = statusSelect.value;
        const rows = table.querySelectorAll('tbody tr');

        rows.forEach(row => {
          const rowStatus = (row.getAttribute('data-status') || '').toLowerCase();
          const visible = !value || rowStatus === value.toLowerCase();
          row.style.display = visible ? '' : 'none';
        });
      }

      if (statusSelect) {
        statusSelect.addEventListener('change', applyStatusFilter);
      }
      if (clearBtn && statusSelect) {
        clearBtn.addEventListener('click', function () {
          statusSelect.value = '';
          applyStatusFilter();
        });
      }

      applyStatusFilter();
    });
  </script>
</body>
</html>
